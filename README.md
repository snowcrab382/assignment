# 도서 관리 시스템 CRUD 과제

## 프로젝트 실행 방법

1. 깃허브 저장소를 로컬 환경으로 클론합니다.
2. 프로젝트의 루트 디렉토리에서 각자의 실행 환경에 따라 아래와 같은 명령어를 실행합니다.

- Maven을 사용하는 경우
   ```
   mvn spring-boot:run
   ```
- Gradle을 사용하는 경우
   ```
   ./gradlew bootRun
   ```
- IDE를 사용하는 경우
    - IDE에서 `BookManagementApplication` 클래스를 실행

3. 성공적으로 프로젝트가 실행되었다면, 브라우저를 통해 h2 database 또는 Swagger-UI에 접속할 수 있습니다.
4. h2 database에 접속하려면 아래와 같은 URL를 사용합니다.

    ```
    http://localhost:8080/h2-console
    ```

    - JDBC URL: `jdbc:h2:mem:library`
    - User Name: `sa`
    - Password: ``

## API 사용법 및 문서 확인 방법

- 각 API의 엔드포인트를 참고하여 요청을 보내는 것으로 API를 테스트할 수 있지만, Swagger-UI를 통해 API 문서를 명확하고 편리하게 확인할 수 있습니다.
- Swagger-UI에 접속하려면 아래와 같은 URL를 사용합니다.

    ```
    http://localhost:8080/swagger-ui/index.html
    ```

- 브라우저를 통해 해당 URL로 접속하면, 곧바로 API 테스트가 가능합니다.
- 각 API 카테고리에 존재하는 "Try it out" 버튼을 클릭하여 요청을 보내고, "Execute" 버튼을 클릭하여 응답을 확인할 수 있습니다.
- 모든 API는 동일한 데이터베이스에서 동작하기 때문에, 생성한 데이터는 다른 API에서도 확인할 수 있습니다.

## 주의 사항

- Swagger-UI를 통해 API 문서를 확인할 수 없다면, 프로젝트가 정상적으로 실행되지 않은 것일 수 있습니다. 이 경우, 프로젝트를 다시 실행해주세요.
- 해당 프로젝트에 사용된 데이터베이스는 H2 Database이며, 인-메모리 옵션이 적용중이기에 프로젝트가 종료되면 데이터 또한 모두 삭제됩니다.
- 저자 삭제 API의 경우 저자 삭제 시, 연관된 도서도 함께 삭제되기 때문에 주의가 필요합니다.

## 과제 요구사항

1. 데이터 모델링

- [x] 저자(Author) 엔티티를 설계한다.
    - [x] 저자는 id를 가진다. id는 고유 식별자이며 자동 생성된다.
    - [x] 저자는 name을 가진다. name은 필수로 입력해야 한다.
    - [x] 저자는 email을 가진다. email은 필수로 입력해야 하며, 고유한 값이어야 한다.

- [x] 도서(Book) 엔티티를 설계한다.
    - [x] 도서는 id를 가진다. id는 고유 식별자이며 자동 생성된다.
    - [x] 도서는 title을 가진다. title은 필수로 입력해야 한다.
    - [x] 도서는 description을 가진다. description은 선택적으로 입력할 수 있다.
    - [x] 도서는 isbn을 가진다. isbn은 필수로 입력해야 하며, 고유한 값이어야 한다.
    - [x] 도서는 publication_date를 가진다. publication_date는 선택적으로 입력할 수 있다.
    - [x] 도서는 author_id를 가진다. author_id는 필수로 입력해야 하며, Author와의 관계를 맺는 데 사용된다.

- [x] 저자와 도서 엔티티 간의 관계를 정의한다.
    - [x] 한 명의 저자는 여러 도서를 가질 수 있다.
    - [x] 각 도서는 하나의 저자에 속한다.

2. API 구현

- [x] 저자(Author) API를 개발한다.
    - [x] 저자 생성 API를 구현한다.
        - [x] 저자의 name과 email을 본문에 입력받는다.
    - [x] 저자 목록 조회 API를 구현한다.
        - [x] 모든 저자 목록을 반환한다.
    - [x] 저자 상세 조회 API를 구현한다.
        - [x] 특정 저자의 상세 정보를 반환한다.
    - [x] 저자 수정 API를 구현한다.
        - [x] 저자의 name과 email을 본문에 입력받아 이를 통해 저자 정보를 수정한다.
    - [x] 저자 삭제 API를 구현한다.
        - [x] 저자 삭제 시, 연관된 도서 처리 정책을 우선 계획한다.
        - [x] 연관된 도서 처리 정책을 준수하여 저자를 삭제한다.

- [ ] 도서(Book) API를 개발한다.
    - [x] 도서 생성 API를 구현한다.
        - [x] 도서의 title, description, isbn, publication_date, author_id를 본문에 입력받는다.
    - [ ] 도서 목록 조회 API를 구현한다.
        - [x] 모든 도서 목록을 반환한다.
        - [ ] (선택 사항) 페이지네이션 및 간단한 필터링(출판일 기준 등) 기능을 추가할 수 있다.
    - [x] 도서 상세 조회 API를 구현한다.
        - [x] 특정 도서의 상세 정보를 반환한다.
    - [x] 도서 수정 API를 구현한다.
        - [x] 도서의 title, description, isbn, publication_date, author_id를 본문에 입력받아 이를 통해 도서 정보를 수정한다.
    - [x] 도서 삭제 API를 구현한다.
        - [x] 도서는 별도의 삭제 정책 없이 삭제가 가능하다.

3. 유효성 및 비즈니스 로직

- [x] 고유성 체크
    - [x] 도서의 isbn은 ISBN-10 규칙을 따른다.
        - [x] 10자리 숫자로 구성된다.
        - [x] 첫 번째 두자리는 국가, 언어 식별 번호로 10~90 사이의 숫자가 사용된다.
        - [x] 세 번째부터 여섯 번째 자리는 출판사 식별 번호이다.
        - [x] 일곱 번째부터 아홉 번째 자리는 도서 식별 번호이다.
        - [x] 마지막 자리는 0을 사용한다.
    - [x] 도서의 isbn은 도서마다 유일해야 한다.
    - [x] 저자의 email은 저자마다 유일해야 한다.

- [x] 필수 필드
    - [x] 필수 입력값 누락 시 적절한 에러 메세지를 반환해야 한다.

- [x] 에러 처리
    - [x] 잘못된 입력 등 다양한 상에 대한 적절한 HTTP 상태 코드를 반환해야한다.

4. API 문서 작성

- [x] Swagger를 활용하여 API 문서를 작성한다.
- [x] Swagger UI 통해 API 문서를 확인할 수 있어야 한다.

5. 추가 선택 사항

- [x] 테스트 코드를 작성한다.